<!DOCTYPE html>
<html>
<head>
    <title>Real-time Sensor Data with Generic Sensor API</title>
    <style>
        body{background-color: rgb(239, 138, 138);}
        .status { margin: 10px 0; padding: 10px; background: #ffffff; }
        .error { color: red; }
        .data { font-size: 1.2em; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Accelerometer and Gyroscope Data</h1>
    <div id="status" class="status">Waiting for sensors...</div>
    <button onclick="startSensors()">Start Sensors</button>
    <div class="data">
        <h2>Accelerometer</h2>
        <p>X: <span id="acc-x">-</span></p>
        <p>Y: <span id="acc-y">-</span></p>
        <p>Z: <span id="acc-z">-</span></p>
    </div>
    <div class="data">
        <h2>Gyroscope</h2>
        <p>X: <span id="gyro-x">-</span></p>
        <p>Y: <span id="gyro-y">-</span></p>
        <p>Z: <span id="gyro-z">-</span></p>
    </div>
    <script>
        const statusDiv = document.getElementById('status');

        function updateStatus(message, isError = false) {
            statusDiv.textContent = message;
            statusDiv.className = isError ? 'status error' : 'status';
            console.log(message);
        }

        async function startSensors() {
            updateStatus('Starting sensors...');

            try {
                // Check if the Accelerometer is available
                if ('Accelerometer' in window) {
                    const accelerometer = new Accelerometer({ frequency: 60 });
                    accelerometer.addEventListener('reading', () => {
                        document.getElementById('acc-x').textContent = accelerometer.x.toFixed(3);
                        document.getElementById('acc-y').textContent = accelerometer.y.toFixed(3);
                        document.getElementById('acc-z').textContent = accelerometer.z.toFixed(3);
                    });
                    accelerometer.addEventListener('error', event => {
                        updateStatus(`Accelerometer error: ${event.error.name}`, true);
                    });
                    accelerometer.start();
                    updateStatus('Accelerometer started.');
                } else {
                    updateStatus('Accelerometer not supported on this device/browser.', true);
                }

                // Check if the Gyroscope is available
                if ('Gyroscope' in window) {
                    const gyroscope = new Gyroscope({ frequency: 60 });
                    gyroscope.addEventListener('reading', () => {
                        document.getElementById('gyro-x').textContent = gyroscope.x.toFixed(3);
                        document.getElementById('gyro-y').textContent = gyroscope.y.toFixed(3);
                        document.getElementById('gyro-z').textContent = gyroscope.z.toFixed(3);
                    });
                    gyroscope.addEventListener('error', event => {
                        updateStatus(`Gyroscope error: ${event.error.name}`, true);
                    });
                    gyroscope.start();
                    updateStatus('Gyroscope started.');
                } else {
                    updateStatus('Gyroscope not supported on this device/browser.', true);
                }
            } catch (error) {
                updateStatus(`Error starting sensors: ${error}`, true);
                console.error(error);
            }
        }
    </script>
</body>
</html>